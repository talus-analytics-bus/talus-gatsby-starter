export default () => {
  const data = [
    {
      x: '2020-03-02T00:00:00.000Z',
      y: 0,
    },
    {
      x: '2020-03-03T00:00:00.000Z',
      y: 0,
    },
    {
      x: '2020-03-04T00:00:00.000Z',
      y: 1,
    },
    {
      x: '2020-03-05T00:00:00.000Z',
      y: 1,
    },
    {
      x: '2020-03-06T00:00:00.000Z',
      y: 1,
    },
    {
      x: '2020-03-07T00:00:00.000Z',
      y: 3,
    },
    {
      x: '2020-03-08T00:00:00.000Z',
      y: 1,
    },
    {
      x: '2020-03-09T00:00:00.000Z',
      y: 4,
    },
    {
      x: '2020-03-10T00:00:00.000Z',
      y: 5,
    },
    {
      x: '2020-03-11T00:00:00.000Z',
      y: 16,
    },
    {
      x: '2020-03-12T00:00:00.000Z',
      y: 20,
    },
    {
      x: '2020-03-13T00:00:00.000Z',
      y: 13,
    },
    {
      x: '2020-03-14T00:00:00.000Z',
      y: 22,
    },
    {
      x: '2020-03-15T00:00:00.000Z',
      y: 28,
    },
    {
      x: '2020-03-16T00:00:00.000Z',
      y: 41,
    },
    {
      x: '2020-03-17T00:00:00.000Z',
      y: 65,
    },
    {
      x: '2020-03-18T00:00:00.000Z',
      y: 58,
    },
    {
      x: '2020-03-19T00:00:00.000Z',
      y: 63,
    },
    {
      x: '2020-03-20T00:00:00.000Z',
      y: 65,
    },
    {
      x: '2020-03-21T00:00:00.000Z',
      y: 61,
    },
    {
      x: '2020-03-22T00:00:00.000Z',
      y: 38,
    },
    {
      x: '2020-03-23T00:00:00.000Z',
      y: 89,
    },
    {
      x: '2020-03-24T00:00:00.000Z',
      y: 118,
    },
    {
      x: '2020-03-25T00:00:00.000Z',
      y: 132,
    },
    {
      x: '2020-03-26T00:00:00.000Z',
      y: 152,
    },
    {
      x: '2020-03-27T00:00:00.000Z',
      y: 158,
    },
    {
      x: '2020-03-28T00:00:00.000Z',
      y: 98,
    },
    {
      x: '2020-03-29T00:00:00.000Z',
      y: 74,
    },
    {
      x: '2020-03-30T00:00:00.000Z',
      y: 179,
    },
    {
      x: '2020-03-31T00:00:00.000Z',
      y: 173,
    },
    {
      x: '2020-04-01T00:00:00.000Z',
      y: 169,
    },
    {
      x: '2020-04-02T00:00:00.000Z',
      y: 127,
    },
    {
      x: '2020-04-03T00:00:00.000Z',
      y: 147,
    },
    {
      x: '2020-04-04T00:00:00.000Z',
      y: 93,
    },
    {
      x: '2020-04-05T00:00:00.000Z',
      y: 74,
    },
    {
      x: '2020-04-06T00:00:00.000Z',
      y: 148,
    },
    {
      x: '2020-04-07T00:00:00.000Z',
      y: 123,
    },
    {
      x: '2020-04-08T00:00:00.000Z',
      y: 156,
    },
    {
      x: '2020-04-09T00:00:00.000Z',
      y: 132,
    },
    {
      x: '2020-04-10T00:00:00.000Z',
      y: 173,
    },
    {
      x: '2020-04-11T00:00:00.000Z',
      y: 102,
    },
    {
      x: '2020-04-12T00:00:00.000Z',
      y: 48,
    },
    {
      x: '2020-04-13T00:00:00.000Z',
      y: 156,
    },
    {
      x: '2020-04-14T00:00:00.000Z',
      y: 128,
    },
    {
      x: '2020-04-15T00:00:00.000Z',
      y: 155,
    },
    {
      x: '2020-04-16T00:00:00.000Z',
      y: 126,
    },
    {
      x: '2020-04-17T00:00:00.000Z',
      y: 160,
    },
    {
      x: '2020-04-18T00:00:00.000Z',
      y: 119,
    },
    {
      x: '2020-04-19T00:00:00.000Z',
      y: 49,
    },
    {
      x: '2020-04-20T00:00:00.000Z',
      y: 161,
    },
    {
      x: '2020-04-21T00:00:00.000Z',
      y: 295,
    },
    {
      x: '2020-04-22T00:00:00.000Z',
      y: 110,
    },
    {
      x: '2020-04-23T00:00:00.000Z',
      y: 96,
    },
    {
      x: '2020-04-24T00:00:00.000Z',
      y: 109,
    },
    {
      x: '2020-04-25T00:00:00.000Z',
      y: 45,
    },
    {
      x: '2020-04-26T00:00:00.000Z',
      y: 36,
    },
    {
      x: '2020-04-27T00:00:00.000Z',
      y: 172,
    },
    {
      x: '2020-04-28T00:00:00.000Z',
      y: 118,
    },
    {
      x: '2020-04-29T00:00:00.000Z',
      y: 161,
    },
    {
      x: '2020-04-30T00:00:00.000Z',
      y: 122,
    },
    {
      x: '2020-05-01T00:00:00.000Z',
      y: 133,
    },
    {
      x: '2020-05-02T00:00:00.000Z',
      y: 78,
    },
    {
      x: '2020-05-03T00:00:00.000Z',
      y: 38,
    },
    {
      x: '2020-05-04T00:00:00.000Z',
      y: 139,
    },
    {
      x: '2020-05-05T00:00:00.000Z',
      y: 112,
    },
    {
      x: '2020-05-06T00:00:00.000Z',
      y: 137,
    },
    {
      x: '2020-05-07T00:00:00.000Z',
      y: 102,
    },
    {
      x: '2020-05-08T00:00:00.000Z',
      y: 98,
    },
    {
      x: '2020-05-09T00:00:00.000Z',
      y: 80,
    },
    {
      x: '2020-05-10T00:00:00.000Z',
      y: 50,
    },
    {
      x: '2020-05-11T00:00:00.000Z',
      y: 131,
    },
    {
      x: '2020-05-12T00:00:00.000Z',
      y: 129,
    },
    {
      x: '2020-05-13T00:00:00.000Z',
      y: 124,
    },
    {
      x: '2020-05-14T00:00:00.000Z',
      y: 162,
    },
    {
      x: '2020-05-15T00:00:00.000Z',
      y: 131,
    },
    {
      x: '2020-05-16T00:00:00.000Z',
      y: 85,
    },
    {
      x: '2020-05-17T00:00:00.000Z',
      y: 69,
    },
    {
      x: '2020-05-18T00:00:00.000Z',
      y: 160,
    },
    {
      x: '2020-05-19T00:00:00.000Z',
      y: 119,
    },
    {
      x: '2020-05-20T00:00:00.000Z',
      y: 157,
    },
    {
      x: '2020-05-21T00:00:00.000Z',
      y: 127,
    },
    {
      x: '2020-05-22T00:00:00.000Z',
      y: 145,
    },
    {
      x: '2020-05-23T00:00:00.000Z',
      y: 82,
    },
    {
      x: '2020-05-24T00:00:00.000Z',
      y: 34,
    },
    {
      x: '2020-05-25T00:00:00.000Z',
      y: 52,
    },
    {
      x: '2020-05-26T00:00:00.000Z',
      y: 130,
    },
    {
      x: '2020-05-27T00:00:00.000Z',
      y: 166,
    },
    {
      x: '2020-05-28T00:00:00.000Z',
      y: 138,
    },
    {
      x: '2020-05-29T00:00:00.000Z',
      y: 160,
    },
    {
      x: '2020-05-30T00:00:00.000Z',
      y: 110,
    },
    {
      x: '2020-05-31T00:00:00.000Z',
      y: 60,
    },
    {
      x: '2020-06-01T00:00:00.000Z',
      y: 229,
    },
    {
      x: '2020-06-02T00:00:00.000Z',
      y: 186,
    },
    {
      x: '2020-06-03T00:00:00.000Z',
      y: 192,
    },
    {
      x: '2020-06-04T00:00:00.000Z',
      y: 188,
    },
    {
      x: '2020-06-05T00:00:00.000Z',
      y: 243,
    },
    {
      x: '2020-06-06T00:00:00.000Z',
      y: 146,
    },
    {
      x: '2020-06-07T00:00:00.000Z',
      y: 85,
    },
    {
      x: '2020-06-08T00:00:00.000Z',
      y: 194,
    },
    {
      x: '2020-06-09T00:00:00.000Z',
      y: 268,
    },
    {
      x: '2020-06-10T00:00:00.000Z',
      y: 230,
    },
    {
      x: '2020-06-11T00:00:00.000Z',
      y: 246,
    },
    {
      x: '2020-06-12T00:00:00.000Z',
      y: 289,
    },
    {
      x: '2020-06-13T00:00:00.000Z',
      y: 180,
    },
    {
      x: '2020-06-14T00:00:00.000Z',
      y: 101,
    },
    {
      x: '2020-06-15T00:00:00.000Z',
      y: 273,
    },
    {
      x: '2020-06-16T00:00:00.000Z',
      y: 406,
    },
    {
      x: '2020-06-17T00:00:00.000Z',
      y: 405,
    },
    {
      x: '2020-06-18T00:00:00.000Z',
      y: 389,
    },
    {
      x: '2020-06-19T00:00:00.000Z',
      y: 452,
    },
    {
      x: '2020-06-20T00:00:00.000Z',
      y: 323,
    },
    {
      x: '2020-06-21T00:00:00.000Z',
      y: 164,
    },
    {
      x: '2020-06-22T00:00:00.000Z',
      y: 524,
    },
    {
      x: '2020-06-23T00:00:00.000Z',
      y: 749,
    },
    {
      x: '2020-06-24T00:00:00.000Z',
      y: 851,
    },
    {
      x: '2020-06-25T00:00:00.000Z',
      y: 874,
    },
    {
      x: '2020-06-26T00:00:00.000Z',
      y: 941,
    },
    {
      x: '2020-06-27T00:00:00.000Z',
      y: 681,
    },
    {
      x: '2020-06-28T00:00:00.000Z',
      y: 379,
    },
    {
      x: '2020-06-29T00:00:00.000Z',
      y: 859,
    },
    {
      x: '2020-06-30T00:00:00.000Z',
      y: 1139,
    },
    {
      x: '2020-07-01T00:00:00.000Z',
      y: 1116,
    },
    {
      x: '2020-07-02T00:00:00.000Z',
      y: 1234,
    },
    {
      x: '2020-07-03T00:00:00.000Z',
      y: 538,
    },
    {
      x: '2020-07-04T00:00:00.000Z',
      y: 295,
    },
    {
      x: '2020-07-05T00:00:00.000Z',
      y: 402,
    },
    {
      x: '2020-07-06T00:00:00.000Z',
      y: 1506,
    },
    {
      x: '2020-07-07T00:00:00.000Z',
      y: 1539,
    },
    {
      x: '2020-07-08T00:00:00.000Z',
      y: 1543,
    },
    {
      x: '2020-07-09T00:00:00.000Z',
      y: 1338,
    },
    {
      x: '2020-07-10T00:00:00.000Z',
      y: 1652,
    },
    {
      x: '2020-07-11T00:00:00.000Z',
      y: 1127,
    },
    {
      x: '2020-07-12T00:00:00.000Z',
      y: 453,
    },
    {
      x: '2020-07-13T00:00:00.000Z',
      y: 1125,
    },
    {
      x: '2020-07-14T00:00:00.000Z',
      y: 1474,
    },
    {
      x: '2020-07-15T00:00:00.000Z',
      y: 1562,
    },
    {
      x: '2020-07-16T00:00:00.000Z',
      y: 1405,
    },
    {
      x: '2020-07-17T00:00:00.000Z',
      y: 1454,
    },
    {
      x: '2020-07-18T00:00:00.000Z',
      y: 923,
    },
    {
      x: '2020-07-19T00:00:00.000Z',
      y: 333,
    },
    {
      x: '2020-07-20T00:00:00.000Z',
      y: 1076,
    },
    {
      x: '2020-07-21T00:00:00.000Z',
      y: 1244,
    },
    {
      x: '2020-07-22T00:00:00.000Z',
      y: 1256,
    },
    {
      x: '2020-07-23T00:00:00.000Z',
      y: 1056,
    },
    {
      x: '2020-07-24T00:00:00.000Z',
      y: 1108,
    },
    {
      x: '2020-07-25T00:00:00.000Z',
      y: 680,
    },
    {
      x: '2020-07-26T00:00:00.000Z',
      y: 389,
    },
    {
      x: '2020-07-27T00:00:00.000Z',
      y: 975,
    },
    {
      x: '2020-07-28T00:00:00.000Z',
      y: 1007,
    },
    {
      x: '2020-07-29T00:00:00.000Z',
      y: 882,
    },
    {
      x: '2020-07-30T00:00:00.000Z',
      y: 885,
    },
    {
      x: '2020-07-31T00:00:00.000Z',
      y: 872,
    },
    {
      x: '2020-08-01T00:00:00.000Z',
      y: 401,
    },
    {
      x: '2020-08-02T00:00:00.000Z',
      y: 289,
    },
    {
      x: '2020-08-03T00:00:00.000Z',
      y: 787,
    },
    {
      x: '2020-08-04T00:00:00.000Z',
      y: 800,
    },
    {
      x: '2020-08-05T00:00:00.000Z',
      y: 888,
    },
    {
      x: '2020-08-06T00:00:00.000Z',
      y: 827,
    },
    {
      x: '2020-08-07T00:00:00.000Z',
      y: 846,
    },
    {
      x: '2020-08-08T00:00:00.000Z',
      y: 489,
    },
    {
      x: '2020-08-09T00:00:00.000Z',
      y: 236,
    },
    {
      x: '2020-08-10T00:00:00.000Z',
      y: 626,
    },
    {
      x: '2020-08-11T00:00:00.000Z',
      y: 978,
    },
    {
      x: '2020-08-12T00:00:00.000Z',
      y: 800,
    },
    {
      x: '2020-08-13T00:00:00.000Z',
      y: 835,
    },
    {
      x: '2020-08-14T00:00:00.000Z',
      y: 770,
    },
    {
      x: '2020-08-15T00:00:00.000Z',
      y: 517,
    },
    {
      x: '2020-08-16T00:00:00.000Z',
      y: 186,
    },
    {
      x: '2020-08-17T00:00:00.000Z',
      y: 543,
    },
    {
      x: '2020-08-18T00:00:00.000Z',
      y: 858,
    },
    {
      x: '2020-08-19T00:00:00.000Z',
      y: 649,
    },
    {
      x: '2020-08-20T00:00:00.000Z',
      y: 588,
    },
    {
      x: '2020-08-21T00:00:00.000Z',
      y: 574,
    },
    {
      x: '2020-08-22T00:00:00.000Z',
      y: 401,
    },
    {
      x: '2020-08-23T00:00:00.000Z',
      y: 193,
    },
    {
      x: '2020-08-24T00:00:00.000Z',
      y: 383,
    },
    {
      x: '2020-08-25T00:00:00.000Z',
      y: 633,
    },
    {
      x: '2020-08-26T00:00:00.000Z',
      y: 474,
    },
    {
      x: '2020-08-27T00:00:00.000Z',
      y: 421,
    },
    {
      x: '2020-08-28T00:00:00.000Z',
      y: 407,
    },
    {
      x: '2020-08-29T00:00:00.000Z',
      y: 275,
    },
    {
      x: '2020-08-30T00:00:00.000Z',
      y: 118,
    },
    {
      x: '2020-08-31T00:00:00.000Z',
      y: 390,
    },
    {
      x: '2020-09-01T00:00:00.000Z',
      y: 502,
    },
    {
      x: '2020-09-02T00:00:00.000Z',
      y: 432,
    },
    {
      x: '2020-09-03T00:00:00.000Z',
      y: 447,
    },
    {
      x: '2020-09-04T00:00:00.000Z',
      y: 335,
    },
    {
      x: '2020-09-05T00:00:00.000Z',
      y: 230,
    },
    {
      x: '2020-09-06T00:00:00.000Z',
      y: 99,
    },
    {
      x: '2020-09-07T00:00:00.000Z',
      y: 92,
    },
    {
      x: '2020-09-08T00:00:00.000Z',
      y: 517,
    },
    {
      x: '2020-09-09T00:00:00.000Z',
      y: 413,
    },
    {
      x: '2020-09-10T00:00:00.000Z',
      y: 356,
    },
    {
      x: '2020-09-11T00:00:00.000Z',
      y: 386,
    },
    {
      x: '2020-09-12T00:00:00.000Z',
      y: 218,
    },
    {
      x: '2020-09-13T00:00:00.000Z',
      y: 120,
    },
    {
      x: '2020-09-14T00:00:00.000Z',
      y: 377,
    },
    {
      x: '2020-09-15T00:00:00.000Z',
      y: 444,
    },
    {
      x: '2020-09-16T00:00:00.000Z',
      y: 365,
    },
    {
      x: '2020-09-17T00:00:00.000Z',
      y: 422,
    },
  ]

  // parse caseload data
  const parsed = data.map(day => ({
    x: new Date(day.x),
    y: day.y,
  }))
  // .sort((a, b) => (a.x > b.x ? 1 : -1))

  const y = parsed.map(day => day.y)

  const average = rollingAverage(y, 7)

  const points = parsed.map((day, index) => ({ x: day.x, y: average[index] }))

  return points
}

const rollingAverage = (series: number[], windowSize: number) => {
  const padded = [...Array(windowSize).fill(0), ...series]
  return series.map((_, index) => {
    const w = padded.slice(index + 1, index + windowSize + 1)
    return w.reduce((acc, curr) => acc + curr, 0) / w.length
  })
}
